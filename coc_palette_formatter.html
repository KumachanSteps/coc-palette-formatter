<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>CoCãƒãƒ£ãƒƒãƒˆãƒ‘ãƒ¬ãƒƒãƒˆæ•´å½¢ãƒ„ãƒ¼ãƒ«</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 40px;
  background-color: #f9f9f9;
  display: flex;
  flex-direction: column;
  align-items: center;
}
header {
  margin-bottom: 30px;
  text-align: center;
}
header h1 {
  font-size: 28px;
  color: #333;
}
header p {
  font-size: 14px;
  color: #555;
}
.main {
  display: flex;
  justify-content: center;
  gap: 30px;
  max-width: 1200px;
  width: 100%;
}
.container {
  flex: 1;
  display: flex;
  flex-direction: column;
  max-width: 550px;
}
textarea {
  width: 100%;
  height: 600px;
  resize: none;
  padding: 10px;
  font-family: monospace;
  font-size: 14px;
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}
button {
  margin-top: 10px;
  padding: 10px;
  font-size: 14px;
  cursor: pointer;
  border: none;
  border-radius: 4px;
  background-color: #007acc;
  color: #fff;
  transition: background-color 0.3s;
}
button:hover {
  background-color: #005f99;
}
</style>
</head>
<body>

<header>
  <h1>CoCãƒãƒ£ãƒƒãƒˆãƒ‘ãƒ¬ãƒƒãƒˆæ•´å½¢ãƒ„ãƒ¼ãƒ«</h1>
  <p>ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€CoC6ç‰ˆæ¢ç´¢è€…ã®ãƒãƒ£ãƒƒãƒˆãƒ‘ãƒ¬ãƒƒãƒˆã‚’è‡ªå‹•åˆ†é¡ã—ã€åˆæœŸå€¤æŠ€èƒ½ã‚‚åŠ ãˆãŸå½¢ã§ã‚¹ãƒƒã‚­ãƒªã¨æ•´ç†ã—ã¾ã™ã€‚<br>å…¥åŠ›æ¬„ã«ãƒãƒ£ãƒƒãƒˆãƒ‘ãƒ¬ãƒƒãƒˆã‚’è²¼ã‚Šä»˜ã‘ã€ã€Œåˆ†é¡ã—ã¦å‡ºåŠ›ã€ãƒœã‚¿ãƒ³ã§æ•´å½¢çµæœã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
</header>

<div class="main">
  <div class="container">
    <textarea id="input" placeholder="ã“ã“ã«ãƒãƒ£ãƒƒãƒˆãƒ‘ãƒ¬ãƒƒãƒˆã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„"></textarea>
    <button onclick="formatPalette()">åˆ†é¡ã—ã¦å‡ºåŠ›</button>
  </div>

  <div class="container">
    <textarea id="output" readonly></textarea>
    <button onclick="copyOutput()">ã‚³ãƒ”ãƒ¼</button>
  </div>
</div>

<script>
const initialValues = {
  'ã‚­ãƒƒã‚¯': 25, 'çµ„ã¿ä»˜ã': 25, 'é ­çªã': 10, 'æŠ•æ“²': 25, 'ãƒãƒ¼ã‚·ãƒ£ãƒ«ã‚¢ãƒ¼ãƒ„': 1,
  'æ‹³éŠƒ': 20, 'ã‚µãƒ–ãƒã‚·ãƒ³ã‚¬ãƒ³': 15, 'ã‚·ãƒ§ãƒƒãƒˆã‚¬ãƒ³': 30, 'ãƒã‚·ãƒ³ã‚¬ãƒ³': 15, 'ãƒ©ã‚¤ãƒ•ãƒ«': 25,
  'å¿œæ€¥æ‰‹å½“': 30, 'éµé–‹ã‘': 1, 'éš ã™': 15, 'éš ã‚Œã‚‹': 10, 'å¿ã³æ­©ã': 10, 'å†™çœŸè¡“': 10, 'ç²¾ç¥åˆ†æ': 1,
  'è¿½è·¡': 10, 'ç™»æ”€': 40, 'é‹è»¢': 20, 'æ©Ÿæ¢°ä¿®ç†': 20, 'é‡æ©Ÿæ¢°æ“ä½œ': 1, 'ä¹—é¦¬': 5, 'æ°´æ³³': 25,
  'è£½ä½œ': 5, 'æ“ç¸¦': 1, 'è·³èº': 25, 'é›»æ°—ä¿®ç†': 10, 'ãƒŠãƒ“ã‚²ãƒ¼ãƒˆ': 10, 'å¤‰è£…': 1,
  'è¨€ã„ãã‚‹ã‚': 5, 'ä¿¡ç”¨': 15, 'èª¬å¾—': 15, 'å€¤åˆ‡ã‚Š': 5,
  'åŒ»å­¦': 5, 'ã‚ªã‚«ãƒ«ãƒˆ': 5, 'åŒ–å­¦': 1, 'èŠ¸è¡“': 5, 'çµŒç†': 10, 'è€ƒå¤å­¦': 1, 'ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼': 1,
  'å¿ƒç†å­¦': 5, 'äººé¡å­¦': 1, 'ç”Ÿç‰©å­¦': 1, 'åœ°è³ªå­¦': 1, 'é›»å­å·¥å­¦': 1, 'å¤©æ–‡å­¦': 1, 'åšç‰©å­¦': 10, 'ç‰©ç†å­¦': 1, 'æ³•å¾‹': 5, 'è–¬å­¦': 1, 'æ­´å²': 20
};

function formatPalette() {
  const lines = document.getElementById("input").value.split("\n");
  const categories = { dice: [], explore: [], battle: [], action: [], talk: [], knowledge: [], initial: [], status: [], damage: [] };

  lines.forEach(line => {
    if (line.includes("SAN") || line.includes("ã‚¢ã‚¤ãƒ‡ã‚¢") || line.includes("å¹¸é‹") || line.includes("çŸ¥è­˜")) {
      categories.dice.push(line);
    } else if (line.match(/ãƒ€ãƒ¡ãƒ¼ã‚¸åˆ¤å®š/)) {
      categories.damage.push(line);
    } else if (line.includes("Ã— 5")) {
      categories.status.push(line);
    } else {
      const match = line.match(/CCB<=\d+ \ã€(.+?)\ã€‘/);
      if (!match) return;
      const skill = match[1].replace(/ï¼ˆ.*?ï¼‰/, '');
      const value = parseInt(line.match(/CCB<=(\d+)/)[1]);
      const initial = initialValues[skill] ?? -1;
      if (initial !== -1 && value === initial) {
        categories.initial.push(line);
      } else if (["ç›®æ˜Ÿ", "èãè€³", "å›³æ›¸é¤¨"].includes(skill)) {
        categories.explore.push(line);
      } else if (["å›é¿", "ã“ã¶ã—", "ã‚­ãƒƒã‚¯", "çµ„ã¿ä»˜ã", "é ­çªã", "æŠ•æ“²", "ãƒãƒ¼ã‚·ãƒ£ãƒ«ã‚¢ãƒ¼ãƒ„", "æ‹³éŠƒ", "ã‚µãƒ–ãƒã‚·ãƒ³ã‚¬ãƒ³", "ã‚·ãƒ§ãƒƒãƒˆã‚¬ãƒ³", "ãƒã‚·ãƒ³ã‚¬ãƒ³", "ãƒ©ã‚¤ãƒ•ãƒ«"].some(s => skill.includes(s))) {
        categories.battle.push(line);
      } else if (["å¿œæ€¥æ‰‹å½“", "éµé–‹ã‘", "éš ã™", "éš ã‚Œã‚‹", "å¿ã³æ­©ã", "å†™çœŸè¡“", "ç²¾ç¥åˆ†æ", "è¿½è·¡", "ç™»æ”€", "é‹è»¢", "æ©Ÿæ¢°ä¿®ç†", "é‡æ©Ÿæ¢°æ“ä½œ", "ä¹—é¦¬", "æ°´æ³³", "è£½ä½œ", "æ“ç¸¦", "è·³èº", "é›»æ°—ä¿®ç†", "ãƒŠãƒ“ã‚²ãƒ¼ãƒˆ", "å¤‰è£…"].some(s => skill.includes(s)) || /^(é‹è»¢|è£½ä½œ|æ“ç¸¦)/.test(skillFull)) {
        categories.action.push(line);
      } else if (["è¨€ã„ãã‚‹ã‚", "ä¿¡ç”¨", "èª¬å¾—", "å€¤åˆ‡ã‚Š"].includes(skill) || /^(æ¯å›½èª|ä»–ã®è¨€èª)/.test(skillFull)) {
        categories.talk.push(line);
      } else if (["èŠ¸è¡“"].includes(skill) || /^èŠ¸è¡“/.test(skillFull)) {
        categories.knowledge.push(line);
      } else {
        categories.knowledge.push(line);
      }
    }
  });

  // åˆæœŸå€¤ã®ä¸­ã§å…¥åŠ›ã«å­˜åœ¨ã—ãªã„ã‚‚ã®ã‚’è¿½åŠ 
  const presentSkills = lines.map(line => {
    const match = line.match(/CCB<=\d+ \ã€(.+?)\ã€‘/);
    return match ? match[1].replace(/ï¼ˆ.*?ï¼‰/, '') : null;
  }).filter(Boolean);

  Object.entries(initialValues).forEach(([skill, value]) => {
    if (!presentSkills.includes(skill)) {
      categories.initial.push(`CCB<=${value} ã€${skill}ã€‘`);
    }
  });

  const output = [
    "â—¼ï¸ãƒ€ã‚¤ã‚¹", ...categories.dice,
    "\nğŸŸ¦æ¢ç´¢æŠ€èƒ½", ...categories.explore,
    "\nğŸŸ¥æˆ¦é—˜æŠ€èƒ½", ...categories.battle,
    "\nğŸŸ§è¡Œå‹•æŠ€èƒ½ãƒ»ä»–", ...categories.action,
    "\nğŸŸªäº¤æ¸‰æŠ€èƒ½", ...categories.talk,
    "\nâ¬œï¸çŸ¥è­˜æŠ€èƒ½", ...categories.knowledge,
    "\n========åˆæœŸå€¤========", ...categories.initial,
    "\n========èƒ½åŠ›å€¤========", ...categories.damage, ...categories.status
  ].join("\n");

  document.getElementById("output").value = output;
}

function copyOutput() {
  const output = document.getElementById("output");
  output.select();
  document.execCommand("copy");
  alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
}
</script>

</body>
</html>
